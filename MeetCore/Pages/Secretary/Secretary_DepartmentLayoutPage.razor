@page "/secretaries/{Id}/layout"

@inherits BasePage

@using static MeetBase.Blazor.PaletteColors
@using static MeetBase.Blazor.CssVariables

@using static MeetBase.Blazor.Personalization

@namespace MeetCore

<PageTitle>@EnglishLocalization.Layout</PageTitle>

<ApplicationContainer>

    @if(!mLayoutId.IsNullOrEmpty())
    {
        <div class="textContainer">
            @if(mIsLayoutDescripitonReadOnly)
            {
                @((MarkupString)Markdig.Markdown.ToHtml(mLayoutDescription))
                <MudDivider DividerType="DividerType.Middle" Class="my-6 divider" />
            }
            else
            {
                <MudTextField T="string" Placeholder="The department layout's additional information" 
                              FullWidth="true" 
                              Variant="Variant.Text" 
                              ReadOnly="@mIsLayoutDescripitonReadOnly"
                              @bind-Text="@mLayoutDescriptionInput" 
                              Lines="5" />
            }

            <div class="editTextButtonsContainer">
                @if(mIsLayoutDescripitonReadOnly)
                {
                    <IconButton BackColor="@White"
                                ForeColor="@Amber"
                                BorderRadius="@LargeBorderRadius"
                                VectorSource="@IconPaths.PencilOutlinePath"
                                OnClick="@(() => mIsLayoutDescripitonReadOnly = false)"
                                CssClasses="editButton" />
                }
                else 
                {
                    <IconButton BackColor="@White"
                                ForeColor="@Green"
                                BorderRadius="@($"{LargeBorderRadius} 0 0 {LargeBorderRadius}")"
                                VectorSource="@IconPaths.CheckPath"
                                OnClick="@SaveButton_Onclick"
                                CssClasses="editButton" />
                    <IconButton BackColor="@White"
                                ForeColor="@Persimmon"
                                BorderRadius="@($"0 {LargeBorderRadius} {LargeBorderRadius} 0")"
                                VectorSource="@IconPaths.ClosePath"
                                OnClick="@(() => {mIsLayoutDescripitonReadOnly = true; mLayoutDescriptionInput = string.Empty; })"
                                CssClasses="editButton" />
                }
            </div>
        </div>
    }

    @foreach (var layoutRoom in mLayoutRooms)
    {
        <LayoutPresenter LayoutRoom="@layoutRoom" IsEditable="true" EditButtonClicked="@UpdateLayout" />
    }
</ApplicationContainer>

<IconButton BackColor="@White"
            ForeColor="@Amber"
            VectorSource="@IconPaths.PlusPath"
            BorderRadius="@CircleBorderRadius"
            OnClick="@AddButton_Onclick"
            CssClasses="editButton layoutAddButton" />

<style>
    

</style>